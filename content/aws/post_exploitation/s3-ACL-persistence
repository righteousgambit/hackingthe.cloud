-
author: "Wes Ladd"
title: "s3 ACL Persistence"
description: "Maintain access to s3 resources by configuring Access Control Lists associated with s3 Buckets or Objects."
enableEditBtn: true
editBaseURL: https://github.com/Hacking-the-Cloud/hackingthe.cloud/blob/main/content
---

When doing an assessment in AWS you may want to maintain access for an extended period of time. You may not have the ability to create a new IAM user, or create a new key for existing users. How else can you extend your access? Well, besides other techniques described such as role-chain juggling, you identify sensitive s3 resources such as buckets used for Terraform state file storage, CloudFormation Template storage, SSM script objects, and other application source code sources.

[s3 ACL Access Control](https://docs.aws.amazon.com/AmazonS3/latest/userguide/acl-overview.html) is a recognized functionality of AWS in that you can use an access control list to allow access to s3 buckets from outside your own AWS account without configuring an Identity-based or Resource-based IAM policy. 

For this scenario to work, you will need to have s3:PutBucketAcl, s3:PutObjectAcl, or PutObjectVersionAcl on the target s3 bucket or associated object. Using these permissions, you can extend your access by allowing other AWS accounts you control to read or write objects, buckets, and bucket ACLs. Furthermore, the access can be extended to AUTHENTICATED USERS, which is a term AWS uses to describe any AWS IAM principal in any other AWS account. The access can also be extended to ANY USER which is a term AWS uses to describe anonymous access that does not require authentication.

### Key Considerations:
1. If used to backdoor read/write access to s3 buckets/objects storing sensitive resources such as Terraform state files, CloudFormation Templates, SSM scripts, or other source code, this may be used as a latent privilege escalation for re-accessing an environment, with full administrative access in some cases.
1. Bucket Public Access Block will prevent s3 bucket ACLs from being configured to allow public (ANY USER). If configured, it will provide some limitations to this technique.
